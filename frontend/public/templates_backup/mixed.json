{
  "nodes": [
    {
      "id": "script",
      "type": "scriptNode",
      "position": {
        "x": 50,
        "y": 300
      },
      "data": {
        "scriptName": "train_longcat.py",
        "configPath": "config_new_mixed.json"
      },
      "width": 265,
      "height": 380
    },
    {
      "id": "dir",
      "type": "directoryNode",
      "position": {
        "x": 448.6026832460733,
        "y": -12.879253926701546
      },
      "data": {
        "pretrained_model_name_or_path": "F:/T2ITrainer_pulic/T2ITrainer/longcat_models/LongCat-Image-Edit",
        "output_dir": "F:/ImageSet/longcat_test_edit_output",
        "save_name": "test_edit_mixed",
        "logging_dir": "/home/waas/kontext_output/logs",
        "train_data_dir": "F:/ImageSet/longcat",
        "model_path": "",
        "vae_path": "",
        "pinned": true
      },
      "width": 514,
      "height": 341
    },
    {
      "id": "lora",
      "type": "loraNode",
      "position": {
        "x": 451.3973167539267,
        "y": 350
      },
      "data": {
        "rank": 16,
        "rank_alpha": 16,
        "use_lokr": false,
        "lokr_factor": 8,
        "lora_layers": "all",
        "pinned": true
      },
      "width": 429,
      "height": 249
    },
    {
      "id": "misc",
      "type": "miscNode",
      "position": {
        "x": 973.9886430145234,
        "y": -97.09904702172521
      },
      "data": {
        "resolution": "1024",
        "train_batch_size": 1,
        "num_train_epochs": 10,
        "learning_rate": 1e-4,
        "optimizer": "adamw",
        "mixed_precision": "bf16",
        "seed": 4321,
        "gradient_checkpointing": true,
        "caption_dropout": 0.1,
        "save_model_epochs": 1,
        "blocks_to_swap": 10,
        "recreate_cache": false,
        "validation_epochs": 1,
        "validation_ratio": 0.1,
        "weighting_scheme": "logit_normal",
        "logit_mean": 0.0,
        "logit_std": 1.0,
        "mode_scale": 1.29,
        "guidance_scale": 1.0,
        "mask_dropout": 0.0,
        "freeze_transformer_layers": "",
        "freeze_single_transformer_layers": "",
        "pinned": true
      },
      "width": 786,
      "height": 869
    },
    {
      "id": "ds_list",
      "type": "datasetListNode",
      "position": {
        "x": 450,
        "y": 1000
      },
      "data": {
        "slots": [
          "dataset_0",
          "dataset_1",
          "dataset_2"
        ]
      },
      "width": 250,
      "height": 155
    },
    {
      "id": "dataset1",
      "type": "datasetConfigNode",
      "position": {
        "x": 762.2724476439791,
        "y": 983.2321989528796
      },
      "data": {
        "train_data_dir": "F:/ImageSet/longcat/single_images"
      },
      "width": 348,
      "height": 502
    },
    {
      "id": "dataset2",
      "type": "datasetConfigNode",
      "position": {
        "x": 762.2724476439791,
        "y": 1500
      },
      "data": {
        "train_data_dir": "F:/ImageSet/longcat/pair_comparisons"
      },
      "width": 348,
      "height": 502
    },
    {
      "id": "dataset3",
      "type": "datasetConfigNode",
      "position": {
        "x": 762.2724476439791,
        "y": 2000
      },
      "data": {
        "train_data_dir": "F:/ImageSet/longcat/multiple_references"
      },
      "width": 348,
      "height": 502
    },
    {
      "id": "img_list1",
      "type": "imageListNode",
      "position": {
        "x": 1200,
        "y": 800
      },
      "data": {
        "slots": [
          "img_0"
        ]
      },
      "width": 250,
      "height": 183
    },
    {
      "id": "tgt_list1",
      "type": "targetListNode",
      "position": {
        "x": 1200,
        "y": 1000
      },
      "data": {
        "slots": [
          "tgt_0"
        ]
      },
      "width": 250,
      "height": 183
    },
    {
      "id": "cap_list1",
      "type": "captionListNode",
      "position": {
        "x": 1206.08217443617,
        "y": 1100.504678493624
      },
      "data": {
        "slots": [
          "cap_0"
        ]
      },
      "width": 250,
      "height": 183
    },
    {
      "id": "batch_list1",
      "type": "batchListNode",
      "position": {
        "x": 1203.649304661702,
        "y": 1267.6609365383058
      },
      "data": {
        "slots": [
          "batch_0"
        ]
      },
      "width": 250,
      "height": 183
    },
    {
      "id": "img_list2",
      "type": "imageListNode",
      "position": {
        "x": 1200,
        "y": 1400
      },
      "data": {
        "slots": [
          "img_0"
        ]
      },
      "width": 250,
      "height": 183
    },
    {
      "id": "tgt_list2",
      "type": "targetListNode",
      "position": {
        "x": 1200,
        "y": 1600
      },
      "data": {
        "slots": [
          "tgt_0"
        ]
      },
      "width": 250,
      "height": 183
    },
    {
      "id": "ref_list2",
      "type": "referenceListNode",
      "position": {
        "x": 1200,
        "y": 1800
      },
      "data": {
        "slots": [
          "ref_0"
        ]
      },
      "width": 250,
      "height": 183
    },
    {
      "id": "cap_list2",
      "type": "captionListNode",
      "position": {
        "x": 1206.08217443617,
        "y": 1900.504678493624
      },
      "data": {
        "slots": [
          "cap_0"
        ]
      },
      "width": 250,
      "height": 183
    },
    {
      "id": "batch_list2",
      "type": "batchListNode",
      "position": {
        "x": 1203.649304661702,
        "y": 2067.6609365383058
      },
      "data": {
        "slots": [
          "batch_0"
        ]
      },
      "width": 250,
      "height": 183
    },
    {
      "id": "img_list3",
      "type": "imageListNode",
      "position": {
        "x": 1200,
        "y": 2200
      },
      "data": {
        "slots": [
          "img_0"
        ]
      },
      "width": 250,
      "height": 183
    },
    {
      "id": "tgt_list3",
      "type": "targetListNode",
      "position": {
        "x": 1200,
        "y": 2400
      },
      "data": {
        "slots": [
          "tgt_0"
        ]
      },
      "width": 250,
      "height": 183
    },
    {
      "id": "ref_list3",
      "type": "referenceListNode",
      "position": {
        "x": 1200,
        "y": 2600
      },
      "data": {
        "slots": [
          "ref_0",
          "ref_1"
        ]
      },
      "width": 250,
      "height": 183
    },
    {
      "id": "cap_list3",
      "type": "captionListNode",
      "position": {
        "x": 1206.08217443617,
        "y": 2700.504678493624
      },
      "data": {
        "slots": [
          "cap_0"
        ]
      },
      "width": 250,
      "height": 183
    },
    {
      "id": "batch_list3",
      "type": "batchListNode",
      "position": {
        "x": 1203.649304661702,
        "y": 2867.6609365383058
      },
      "data": {
        "slots": [
          "batch_0"
        ]
      },
      "width": 250,
      "height": 183
    },
    {
      "id": "img_1_1",
      "type": "imageConfigNode",
      "position": {
        "x": 1600,
        "y": 800
      },
      "data": {
        "key": "train",
        "suffix": "_T"
      },
      "width": 348,
      "height": 136
    },
    {
      "id": "tgt_1_1",
      "type": "targetConfigNode",
      "position": {
        "x": 1600,
        "y": 1000
      },
      "data": {
        "key": "train",
        "image": "train",
        "from_image": ""
      },
      "width": 348,
      "height": 191
    },
    {
      "id": "cap_1_1",
      "type": "captionConfigNode",
      "position": {
        "x": 1570.805562706384,
        "y": 1150.2882436063899
      },
      "data": {
        "key": "train",
        "ext": ".txt",
        "image": "train"
      },
      "width": 506,
      "height": 185
    },
    {
      "id": "batch_1_1",
      "type": "batchConfigNode",
      "position": {
        "x": 1565.939823157448,
        "y": 1261.578762102136
      },
      "data": {
        "target_config": "train",
        "caption_config": "train",
        "caption_dropout": 0.1
      },
      "width": 348,
      "height": 191
    },
    {
      "id": "img_2_1",
      "type": "imageConfigNode",
      "position": {
        "x": 1600,
        "y": 1400
      },
      "data": {
        "key": "train",
        "suffix": "_T"
      },
      "width": 348,
      "height": 136
    },
    {
      "id": "tgt_2_1",
      "type": "targetConfigNode",
      "position": {
        "x": 1600,
        "y": 1600
      },
      "data": {
        "key": "train",
        "image": "train",
        "from_image": ""
      },
      "width": 348,
      "height": 191
    },
    {
      "id": "ref_group_2_1",
      "type": "referenceConfigNode",
      "position": {
        "x": 1600,
        "y": 1800
      },
      "data": {
        "key": "train_ref",
        "slots": [
          "entry_0"
        ]
      },
      "width": 348,
      "height": 136
    },
    {
      "id": "ref_entry_2_1",
      "type": "referenceEntryNode",
      "position": {
        "x": 1950,
        "y": 1800
      },
      "data": {
        "sample_type": "from_same_name",
        "image": "train"
      },
      "width": 348,
      "height": 136
    },
    {
      "id": "cap_2_1",
      "type": "captionConfigNode",
      "position": {
        "x": 1570.805562706384,
        "y": 1950.2882436063899
      },
      "data": {
        "key": "train",
        "ext": ".txt",
        "image": "train"
      },
      "width": 506,
      "height": 185
    },
    {
      "id": "batch_2_1",
      "type": "batchConfigNode",
      "position": {
        "x": 1565.939823157448,
        "y": 2061.578762102136
      },
      "data": {
        "target_config": "train",
        "caption_config": "train",
        "reference_config": "train_ref",
        "caption_dropout": 0.1
      },
      "width": 348,
      "height": 191
    },
    {
      "id": "img_3_1",
      "type": "imageConfigNode",
      "position": {
        "x": 1600,
        "y": 2200
      },
      "data": {
        "key": "train",
        "suffix": "_T"
      },
      "width": 348,
      "height": 136
    },
    {
      "id": "tgt_3_1",
      "type": "targetConfigNode",
      "position": {
        "x": 1600,
        "y": 2400
      },
      "data": {
        "key": "train",
        "image": "train",
        "from_image": ""
      },
      "width": 348,
      "height": 191
    },
    {
      "id": "ref_group_3_1",
      "type": "referenceConfigNode",
      "position": {
        "x": 1600,
        "y": 2600
      },
      "data": {
        "key": "train_ref1",
        "slots": [
          "entry_0"
        ]
      },
      "width": 348,
      "height": 136
    },
    {
      "id": "ref_entry_3_1",
      "type": "referenceEntryNode",
      "position": {
        "x": 1950,
        "y": 2600
      },
      "data": {
        "sample_type": "from_same_name",
        "image": "train"
      },
      "width": 348,
      "height": 136
    },
    {
      "id": "ref_group_3_2",
      "type": "referenceConfigNode",
      "position": {
        "x": 1600,
        "y": 2700
      },
      "data": {
        "key": "train_ref2",
        "slots": [
          "entry_0"
        ]
      },
      "width": 348,
      "height": 136
    },
    {
      "id": "ref_entry_3_2",
      "type": "referenceEntryNode",
      "position": {
        "x": 1950,
        "y": 2700
      },
      "data": {
        "sample_type": "from_subdir",
        "image": "reference"
      },
      "width": 348,
      "height": 136
    },
    {
      "id": "cap_3_1",
      "type": "captionConfigNode",
      "position": {
        "x": 1570.805562706384,
        "y": 2850.2882436063899
      },
      "data": {
        "key": "train",
        "ext": ".txt",
        "image": "train"
      },
      "width": 506,
      "height": 185
    },
    {
      "id": "batch_3_1",
      "type": "batchConfigNode",
      "position": {
        "x": 1565.939823157448,
        "y": 2961.578762102136
      },
      "data": {
        "target_config": "train",
        "caption_config": "train",
        "reference_config": "train_ref1,train_ref2",
        "caption_dropout": 0.1
      },
      "width": 348,
      "height": 191
    }
  ],
  "edges": [
    {
      "id": "e1",
      "source": "script",
      "sourceHandle": "dir_out",
      "target": "dir",
      "targetHandle": "in"
    },
    {
      "id": "e2",
      "source": "script",
      "sourceHandle": "lora_out",
      "target": "lora",
      "targetHandle": "in"
    },
    {
      "id": "e3",
      "source": "script",
      "sourceHandle": "misc_out",
      "target": "misc",
      "targetHandle": "in"
    },
    {
      "id": "e4",
      "source": "script",
      "sourceHandle": "json_out",
      "target": "ds_list",
      "targetHandle": "in"
    },
    {
      "id": "e5",
      "source": "ds_list",
      "sourceHandle": "dataset_0",
      "target": "dataset1",
      "targetHandle": "in"
    },
    {
      "id": "e6",
      "source": "ds_list",
      "sourceHandle": "dataset_1",
      "target": "dataset2",
      "targetHandle": "in"
    },
    {
      "id": "e7",
      "source": "ds_list",
      "sourceHandle": "dataset_2",
      "target": "dataset3",
      "targetHandle": "in"
    },
    {
      "id": "e8",
      "source": "dataset1",
      "sourceHandle": "image_config",
      "target": "img_list1",
      "targetHandle": "in"
    },
    {
      "id": "e9",
      "source": "dataset1",
      "sourceHandle": "target_config",
      "target": "tgt_list1",
      "targetHandle": "in"
    },
    {
      "id": "e10",
      "source": "dataset1",
      "sourceHandle": "caption_config",
      "target": "cap_list1",
      "targetHandle": "in"
    },
    {
      "id": "e11",
      "source": "dataset1",
      "sourceHandle": "batch_config",
      "target": "batch_list1",
      "targetHandle": "in"
    },
    {
      "id": "e12",
      "source": "dataset2",
      "sourceHandle": "image_config",
      "target": "img_list2",
      "targetHandle": "in"
    },
    {
      "id": "e13",
      "source": "dataset2",
      "sourceHandle": "target_config",
      "target": "tgt_list2",
      "targetHandle": "in"
    },
    {
      "id": "e14",
      "source": "dataset2",
      "sourceHandle": "reference_config",
      "target": "ref_list2",
      "targetHandle": "in"
    },
    {
      "id": "e15",
      "source": "dataset2",
      "sourceHandle": "caption_config",
      "target": "cap_list2",
      "targetHandle": "in"
    },
    {
      "id": "e16",
      "source": "dataset2",
      "sourceHandle": "batch_config",
      "target": "batch_list2",
      "targetHandle": "in"
    },
    {
      "id": "e17",
      "source": "dataset3",
      "sourceHandle": "image_config",
      "target": "img_list3",
      "targetHandle": "in"
    },
    {
      "id": "e18",
      "source": "dataset3",
      "sourceHandle": "target_config",
      "target": "tgt_list3",
      "targetHandle": "in"
    },
    {
      "id": "e19",
      "source": "dataset3",
      "sourceHandle": "reference_config",
      "target": "ref_list3",
      "targetHandle": "in"
    },
    {
      "id": "e20",
      "source": "dataset3",
      "sourceHandle": "caption_config",
      "target": "cap_list3",
      "targetHandle": "in"
    },
    {
      "id": "e21",
      "source": "dataset3",
      "sourceHandle": "batch_config",
      "target": "batch_list3",
      "targetHandle": "in"
    },
    {
      "id": "e22",
      "source": "img_list1",
      "sourceHandle": "img_0",
      "target": "img_1_1",
      "targetHandle": "in"
    },
    {
      "id": "e23",
      "source": "tgt_list1",
      "sourceHandle": "tgt_0",
      "target": "tgt_1_1",
      "targetHandle": "in"
    },
    {
      "id": "e24",
      "source": "cap_list1",
      "sourceHandle": "cap_0",
      "target": "cap_1_1",
      "targetHandle": "in"
    },
    {
      "id": "e25",
      "source": "batch_list1",
      "sourceHandle": "batch_0",
      "target": "batch_1_1",
      "targetHandle": "in"
    },
    {
      "id": "e26",
      "source": "img_list2",
      "sourceHandle": "img_0",
      "target": "img_2_1",
      "targetHandle": "in"
    },
    {
      "id": "e27",
      "source": "tgt_list2",
      "sourceHandle": "tgt_0",
      "target": "tgt_2_1",
      "targetHandle": "in"
    },
    {
      "id": "e28",
      "source": "ref_list2",
      "sourceHandle": "ref_0",
      "target": "ref_group_2_1",
      "targetHandle": "in"
    },
    {
      "id": "e29",
      "source": "ref_group_2_1",
      "sourceHandle": "entry_0",
      "target": "ref_entry_2_1",
      "targetHandle": "in"
    },
    {
      "id": "e30",
      "source": "cap_list2",
      "sourceHandle": "cap_0",
      "target": "cap_2_1",
      "targetHandle": "in"
    },
    {
      "id": "e31",
      "source": "batch_list2",
      "sourceHandle": "batch_0",
      "target": "batch_2_1",
      "targetHandle": "in"
    },
    {
      "id": "e32",
      "source": "img_list3",
      "sourceHandle": "img_0",
      "target": "img_3_1",
      "targetHandle": "in"
    },
    {
      "id": "e33",
      "source": "tgt_list3",
      "sourceHandle": "tgt_0",
      "target": "tgt_3_1",
      "targetHandle": "in"
    },
    {
      "id": "e34",
      "source": "ref_list3",
      "sourceHandle": "ref_0",
      "target": "ref_group_3_1",
      "targetHandle": "in"
    },
    {
      "id": "e35",
      "source": "ref_list3",
      "sourceHandle": "ref_1",
      "target": "ref_group_3_2",
      "targetHandle": "in"
    },
    {
      "id": "e36",
      "source": "ref_group_3_1",
      "sourceHandle": "entry_0",
      "target": "ref_entry_3_1",
      "targetHandle": "in"
    },
    {
      "id": "e37",
      "source": "ref_group_3_2",
      "sourceHandle": "entry_0",
      "target": "ref_entry_3_2",
      "targetHandle": "in"
    },
    {
      "id": "e38",
      "source": "cap_list3",
      "sourceHandle": "cap_0",
      "target": "cap_3_1",
      "targetHandle": "in"
    },
    {
      "id": "e39",
      "source": "batch_list3",
      "sourceHandle": "batch_0",
      "target": "batch_3_1",
      "targetHandle": "in"
    }
  ],
  "timestamp": 1766056860887,
  "version": "1.0"
}