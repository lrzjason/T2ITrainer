{
  "nodes": [
    {
      "id": "script",
      "type": "scriptNode",
      "position": {
        "x": 50,
        "y": 300
      },
      "data": {
        "scriptName": "train_longcat.py",
        "configPath": "config_new_pairs.json"
      },
      "width": 265,
      "height": 380,
      "selected": false
    },
    {
      "id": "dir",
      "type": "directoryNode",
      "position": {
        "x": 448.6026832460733,
        "y": -12.879253926701546
      },
      "data": {
        "pretrained_model_name_or_path": "F:/T2ITrainer_pulic/T2ITrainer/longcat_models/LongCat-Image-Edit",
        "output_dir": "F:/ImageSet/longcat_test_edit_output",
        "save_name": "test_edit_pairs",
        "logging_dir": "/home/waas/kontext_output/logs",
        "train_data_dir": "F:/ImageSet/longcat",
        "model_path": "",
        "vae_path": "",
        "pinned": true
      },
      "width": 514,
      "height": 341,
      "selected": false
    },
    {
      "id": "lora",
      "type": "loraNode",
      "position": {
        "x": 451.3973167539267,
        "y": 350
      },
      "data": {
        "rank": 16,
        "rank_alpha": 16,
        "use_lokr": false,
        "lokr_factor": 8,
        "lora_layers": "all",
        "pinned": true
      },
      "width": 429,
      "height": 249,
      "selected": false
    },
    {
      "id": "misc",
      "type": "miscNode",
      "position": {
        "x": 973.9886430145234,
        "y": -97.09904702172521
      },
      "data": {
        "resolution": "1024",
        "train_batch_size": 1,
        "num_train_epochs": 10,
        "learning_rate": 0.0001,
        "optimizer": "adamw",
        "mixed_precision": "bf16",
        "seed": 4321,
        "gradient_checkpointing": true,
        "caption_dropout": 0.1,
        "save_model_epochs": 1,
        "blocks_to_swap": 10,
        "recreate_cache": false,
        "validation_epochs": 1,
        "validation_ratio": 0.1,
        "weighting_scheme": "logit_normal",
        "logit_mean": 0,
        "logit_std": 1,
        "mode_scale": 1.29,
        "guidance_scale": 1,
        "mask_dropout": 0,
        "freeze_transformer_layers": "",
        "freeze_single_transformer_layers": "",
        "pinned": true
      },
      "width": 786,
      "height": 869,
      "selected": false
    },
    {
      "id": "ds_list",
      "type": "datasetListNode",
      "position": {
        "x": 450,
        "y": 1000
      },
      "data": {
        "slots": [
          "dataset_0",
          "dataset_cbgxv"
        ]
      },
      "width": 250,
      "height": 188,
      "selected": false,
      "dragging": false
    },
    {
      "id": "dataset",
      "type": "datasetConfigNode",
      "position": {
        "x": 762.2724476439791,
        "y": 983.2321989528796
      },
      "data": {
        "train_data_dir": "F:/ImageSet/longcat_1"
      },
      "width": 348,
      "height": 526,
      "selected": false,
      "dragging": false
    },
    {
      "id": "img_list",
      "type": "imageListNode",
      "position": {
        "x": 1207.1677026110815,
        "y": 816.0181521605899
      },
      "data": {
        "slots": [
          "img_0",
          "img_bqemw",
          "img_yz7iv"
        ]
      },
      "width": 250,
      "height": 250,
      "selected": false,
      "positionAbsolute": {
        "x": 1207.1677026110815,
        "y": 816.0181521605899
      },
      "dragging": false
    },
    {
      "id": "tgt_list",
      "type": "targetListNode",
      "position": {
        "x": 1212.143831481339,
        "y": 1278.3804015372637
      },
      "data": {
        "slots": [
          "tgt_0"
        ]
      },
      "width": 250,
      "height": 183,
      "selected": false,
      "positionAbsolute": {
        "x": 1212.143831481339,
        "y": 1278.3804015372637
      },
      "dragging": false
    },
    {
      "id": "ref_list",
      "type": "referenceListNode",
      "position": {
        "x": 1217.0333819127382,
        "y": 1638.223592991492
      },
      "data": {
        "slots": [
          "ref_0"
        ]
      },
      "width": 250,
      "height": 183,
      "selected": false,
      "positionAbsolute": {
        "x": 1217.0333819127382,
        "y": 1638.223592991492
      },
      "dragging": false
    },
    {
      "id": "cap_list",
      "type": "captionListNode",
      "position": {
        "x": 1210.3293946279164,
        "y": 1886.5750547363814
      },
      "data": {
        "slots": [
          "cap_0"
        ]
      },
      "width": 250,
      "height": 183,
      "selected": false,
      "positionAbsolute": {
        "x": 1210.3293946279164,
        "y": 1886.5750547363814
      },
      "dragging": false
    },
    {
      "id": "batch_list",
      "type": "batchListNode",
      "position": {
        "x": 1210.7280049812794,
        "y": 2091.438749968781
      },
      "data": {
        "slots": [
          "batch_0"
        ]
      },
      "width": 250,
      "height": 183,
      "selected": false,
      "positionAbsolute": {
        "x": 1210.7280049812794,
        "y": 2091.438749968781
      },
      "dragging": false
    },
    {
      "id": "img_1",
      "type": "imageConfigNode",
      "position": {
        "x": 1614.1574006391552,
        "y": 729.2129968042246
      },
      "data": {
        "key": "train",
        "suffix": "_T"
      },
      "width": 348,
      "height": 136,
      "selected": false,
      "positionAbsolute": {
        "x": 1614.1574006391552,
        "y": 729.2129968042246
      },
      "dragging": false
    },
    {
      "id": "tgt_1",
      "type": "targetConfigNode",
      "position": {
        "x": 1619.431838093202,
        "y": 1298.1694607228035
      },
      "data": {
        "key": "train_target",
        "image": "train",
        "from_image": ""
      },
      "width": 348,
      "height": 191,
      "selected": false,
      "positionAbsolute": {
        "x": 1619.431838093202,
        "y": 1298.1694607228035
      },
      "dragging": false
    },
    {
      "id": "ref_group_1",
      "type": "referenceConfigNode",
      "position": {
        "x": 1616.3062077182424,
        "y": 1579.1752844147125
      },
      "data": {
        "key": "ref_list",
        "slots": [
          "entry_0",
          "entry_czde7"
        ]
      },
      "width": 250,
      "height": 272,
      "selected": false,
      "positionAbsolute": {
        "x": 1616.3062077182424,
        "y": 1579.1752844147125
      },
      "dragging": false
    },
    {
      "id": "ref_entry_1",
      "type": "referenceEntryNode",
      "position": {
        "x": 2010.2390746561491,
        "y": 1564.4795098210743
      },
      "data": {
        "sample_type": "from_same_name",
        "image": "ref"
      },
      "width": 348,
      "height": 137,
      "selected": false,
      "positionAbsolute": {
        "x": 2010.2390746561491,
        "y": 1564.4795098210743
      },
      "dragging": false
    },
    {
      "id": "cap_1",
      "type": "captionConfigNode",
      "position": {
        "x": 1628.85090532692,
        "y": 1908.0438185708372
      },
      "data": {
        "key": "train_caption",
        "ext": ".txt",
        "image": "train",
        "reference_list": {
          "reference_config": "ref_list",
          "resize": "384",
          "dropout": 0.1,
          "min_length": 1
        }
      },
      "width": 506,
      "height": 284,
      "selected": false,
      "positionAbsolute": {
        "x": 1628.85090532692,
        "y": 1908.0438185708372
      },
      "dragging": false
    },
    {
      "id": "batch_1",
      "type": "batchConfigNode",
      "position": {
        "x": 1626.8166459058148,
        "y": 2218.4361415406684
      },
      "data": {
        "target_config": "train_target",
        "caption_config": "train_caption",
        "reference_config": "ref_list",
        "caption_dropout": 0.1
      },
      "width": 348,
      "height": 191,
      "selected": false,
      "positionAbsolute": {
        "x": 1626.8166459058148,
        "y": 2218.4361415406684
      },
      "dragging": false
    },
    {
      "id": "imageConfigNode_obbbr3",
      "type": "imageConfigNode",
      "position": {
        "x": 1615.6163674727043,
        "y": 896.6873153757205
      },
      "data": {
        "label": "Image Item",
        "suffix": "_R",
        "key": "ref"
      },
      "width": 348,
      "height": 136,
      "selected": false,
      "dragging": false,
      "positionAbsolute": {
        "x": 1615.6163674727043,
        "y": 896.6873153757205
      }
    },
    {
      "id": "imageConfigNode_m2gx8t",
      "type": "imageConfigNode",
      "position": {
        "x": 1623.7265009293076,
        "y": 1084.2688431371175
      },
      "data": {
        "label": "Image Item",
        "key": "grey",
        "suffix": "_G"
      },
      "width": 348,
      "height": 136,
      "selected": false,
      "dragging": false,
      "positionAbsolute": {
        "x": 1623.7265009293076,
        "y": 1084.2688431371175
      }
    },
    {
      "id": "referenceEntryNode_maymzi",
      "type": "referenceEntryNode",
      "position": {
        "x": 2016.3041239543886,
        "y": 1736.3379000554949
      },
      "data": {
        "label": "Ref Source",
        "image": "grey"
      },
      "width": 348,
      "height": 137,
      "selected": false,
      "positionAbsolute": {
        "x": 2016.3041239543886,
        "y": 1736.3379000554949
      },
      "dragging": false
    },
    {
      "id": "datasetConfigNode_w3tu6e",
      "type": "datasetConfigNode",
      "position": {
        "x": 766.9687655986828,
        "y": 2725.5971565278924
      },
      "data": {
        "train_data_dir": "F:/ImageSet/longcat_2"
      },
      "width": 348,
      "height": 526,
      "selected": false,
      "positionAbsolute": {
        "x": 766.9687655986828,
        "y": 2725.5971565278924
      },
      "dragging": false
    },
    {
      "id": "imageListNode_abhwuy",
      "type": "imageListNode",
      "position": {
        "x": 1211.8640205657853,
        "y": 2558.3831097356024
      },
      "data": {
        "slots": [
          "img_0",
          "img_bqemw"
        ]
      },
      "width": 250,
      "height": 216,
      "selected": false,
      "positionAbsolute": {
        "x": 1211.8640205657853,
        "y": 2558.3831097356024
      },
      "dragging": false
    },
    {
      "id": "targetListNode_0n02jz",
      "type": "targetListNode",
      "position": {
        "x": 1216.8401494360428,
        "y": 3020.745359112276
      },
      "data": {
        "slots": [
          "tgt_0"
        ]
      },
      "width": 250,
      "height": 183,
      "selected": false,
      "positionAbsolute": {
        "x": 1216.8401494360428,
        "y": 3020.745359112276
      },
      "dragging": false
    },
    {
      "id": "referenceListNode_mi3ibt",
      "type": "referenceListNode",
      "position": {
        "x": 1221.729699867442,
        "y": 3380.5885505665046
      },
      "data": {
        "slots": [
          "ref_0"
        ]
      },
      "width": 250,
      "height": 183,
      "selected": false,
      "positionAbsolute": {
        "x": 1221.729699867442,
        "y": 3380.5885505665046
      },
      "dragging": false
    },
    {
      "id": "captionListNode_fj4tgk",
      "type": "captionListNode",
      "position": {
        "x": 1215.0257125826201,
        "y": 3628.9400123113937
      },
      "data": {
        "slots": [
          "cap_0"
        ]
      },
      "width": 250,
      "height": 183,
      "selected": false,
      "positionAbsolute": {
        "x": 1215.0257125826201,
        "y": 3628.9400123113937
      },
      "dragging": false
    },
    {
      "id": "batchListNode_kpny16",
      "type": "batchListNode",
      "position": {
        "x": 1215.4243229359831,
        "y": 3833.8037075437933
      },
      "data": {
        "slots": [
          "batch_0"
        ]
      },
      "width": 250,
      "height": 183,
      "selected": false,
      "positionAbsolute": {
        "x": 1215.4243229359831,
        "y": 3833.8037075437933
      },
      "dragging": false
    },
    {
      "id": "imageConfigNode_1nv2wa",
      "type": "imageConfigNode",
      "position": {
        "x": 1618.853718593859,
        "y": 2471.5779543792373
      },
      "data": {
        "key": "train",
        "suffix": "_A"
      },
      "width": 348,
      "height": 136,
      "selected": false,
      "positionAbsolute": {
        "x": 1618.853718593859,
        "y": 2471.5779543792373
      },
      "dragging": false
    },
    {
      "id": "targetConfigNode_f208nn",
      "type": "targetConfigNode",
      "position": {
        "x": 1624.1281560479056,
        "y": 3040.534418297816
      },
      "data": {
        "key": "train_target2",
        "image": "train",
        "from_image": ""
      },
      "width": 348,
      "height": 191,
      "selected": false,
      "positionAbsolute": {
        "x": 1624.1281560479056,
        "y": 3040.534418297816
      },
      "dragging": false
    },
    {
      "id": "referenceConfigNode_3dhhvf",
      "type": "referenceConfigNode",
      "position": {
        "x": 1621.002525672946,
        "y": 3321.540241989725
      },
      "data": {
        "key": "ref_list2",
        "slots": [
          "entry_0"
        ]
      },
      "width": 250,
      "height": 238,
      "selected": false,
      "positionAbsolute": {
        "x": 1621.002525672946,
        "y": 3321.540241989725
      },
      "dragging": false
    },
    {
      "id": "referenceEntryNode_7zsfq2",
      "type": "referenceEntryNode",
      "position": {
        "x": 2002.6106595096276,
        "y": 3416.5345919969923
      },
      "data": {
        "sample_type": "from_same_name",
        "image": "ref"
      },
      "width": 348,
      "height": 137,
      "selected": false,
      "positionAbsolute": {
        "x": 2002.6106595096276,
        "y": 3416.5345919969923
      },
      "dragging": false
    },
    {
      "id": "captionConfigNode_y6g2r0",
      "type": "captionConfigNode",
      "position": {
        "x": 1633.5472232816237,
        "y": 3650.4087761458495
      },
      "data": {
        "key": "train_caption2",
        "ext": ".txt",
        "image": "train",
        "reference_list": {
          "reference_config": "ref_list",
          "resize": "384",
          "dropout": 0.1,
          "min_length": 1
        }
      },
      "width": 506,
      "height": 284,
      "selected": false,
      "positionAbsolute": {
        "x": 1633.5472232816237,
        "y": 3650.4087761458495
      },
      "dragging": false
    },
    {
      "id": "batchConfigNode_8luchy",
      "type": "batchConfigNode",
      "position": {
        "x": 1631.5129638605185,
        "y": 3960.8010991156807
      },
      "data": {
        "target_config": "train_target2",
        "caption_config": "train_caption2",
        "reference_config": "ref_list2",
        "caption_dropout": 0.1
      },
      "width": 348,
      "height": 191,
      "selected": false,
      "positionAbsolute": {
        "x": 1631.5129638605185,
        "y": 3960.8010991156807
      },
      "dragging": false
    },
    {
      "id": "imageConfigNode_q9h7bm",
      "type": "imageConfigNode",
      "position": {
        "x": 1620.3126854274078,
        "y": 2639.052272950733
      },
      "data": {
        "label": "Image Item",
        "suffix": "_B",
        "key": "ref"
      },
      "width": 348,
      "height": 136,
      "selected": false,
      "dragging": false,
      "positionAbsolute": {
        "x": 1620.3126854274078,
        "y": 2639.052272950733
      }
    }
  ],
  "edges": [
    {
      "id": "e1",
      "source": "script",
      "sourceHandle": "dir_out",
      "target": "dir",
      "targetHandle": "in"
    },
    {
      "id": "e2",
      "source": "script",
      "sourceHandle": "lora_out",
      "target": "lora",
      "targetHandle": "in"
    },
    {
      "id": "e3",
      "source": "script",
      "sourceHandle": "misc_out",
      "target": "misc",
      "targetHandle": "in",
      "selected": false
    },
    {
      "id": "e4",
      "source": "script",
      "sourceHandle": "json_out",
      "target": "ds_list",
      "targetHandle": "in"
    },
    {
      "id": "e5",
      "source": "ds_list",
      "sourceHandle": "dataset_0",
      "target": "dataset",
      "targetHandle": "in",
      "selected": false
    },
    {
      "id": "e6",
      "source": "dataset",
      "sourceHandle": "image_config",
      "target": "img_list",
      "targetHandle": "in",
      "selected": false
    },
    {
      "id": "e7",
      "source": "dataset",
      "sourceHandle": "target_config",
      "target": "tgt_list",
      "targetHandle": "in",
      "selected": false
    },
    {
      "id": "e8",
      "source": "dataset",
      "sourceHandle": "reference_config",
      "target": "ref_list",
      "targetHandle": "in",
      "selected": false
    },
    {
      "id": "e9",
      "source": "dataset",
      "sourceHandle": "caption_config",
      "target": "cap_list",
      "targetHandle": "in",
      "selected": false
    },
    {
      "id": "e10",
      "source": "dataset",
      "sourceHandle": "batch_config",
      "target": "batch_list",
      "targetHandle": "in",
      "selected": false
    },
    {
      "id": "e11",
      "source": "img_list",
      "sourceHandle": "img_0",
      "target": "img_1",
      "targetHandle": "in",
      "selected": false
    },
    {
      "id": "e12",
      "source": "tgt_list",
      "sourceHandle": "tgt_0",
      "target": "tgt_1",
      "targetHandle": "in",
      "selected": false
    },
    {
      "id": "e13",
      "source": "ref_list",
      "sourceHandle": "ref_0",
      "target": "ref_group_1",
      "targetHandle": "in",
      "selected": false
    },
    {
      "id": "e13b",
      "source": "ref_group_1",
      "sourceHandle": "entry_0",
      "target": "ref_entry_1",
      "targetHandle": "in",
      "selected": false
    },
    {
      "id": "e14",
      "source": "cap_list",
      "sourceHandle": "cap_0",
      "target": "cap_1",
      "targetHandle": "in",
      "selected": false
    },
    {
      "id": "e15",
      "source": "batch_list",
      "sourceHandle": "batch_0",
      "target": "batch_1",
      "targetHandle": "in",
      "selected": false
    },
    {
      "type": "default",
      "animated": false,
      "style": {
        "strokeWidth": 2,
        "stroke": "#a1a1aa"
      },
      "interactionWidth": 15,
      "source": "img_list",
      "sourceHandle": "img_bqemw",
      "target": "imageConfigNode_obbbr3",
      "targetHandle": "in",
      "id": "reactflow__edge-img_listimg_bqemw-imageConfigNode_obbbr3in",
      "selected": false
    },
    {
      "source": "img_list",
      "sourceHandle": "img_yz7iv",
      "target": "imageConfigNode_m2gx8t",
      "targetHandle": "in",
      "id": "reactflow__edge-img_listimg_yz7iv-imageConfigNode_m2gx8tin",
      "selected": false
    },
    {
      "source": "ref_group_1",
      "sourceHandle": "entry_czde7",
      "target": "referenceEntryNode_maymzi",
      "targetHandle": "in",
      "id": "reactflow__edge-ref_group_1entry_czde7-referenceEntryNode_maymziin",
      "selected": false
    },
    {
      "id": "efdgi7y",
      "source": "datasetConfigNode_w3tu6e",
      "sourceHandle": "image_config",
      "target": "imageListNode_abhwuy",
      "targetHandle": "in",
      "selected": false
    },
    {
      "id": "eolvlek",
      "source": "datasetConfigNode_w3tu6e",
      "sourceHandle": "target_config",
      "target": "targetListNode_0n02jz",
      "targetHandle": "in",
      "selected": false
    },
    {
      "id": "ekg0xc1",
      "source": "datasetConfigNode_w3tu6e",
      "sourceHandle": "reference_config",
      "target": "referenceListNode_mi3ibt",
      "targetHandle": "in",
      "selected": false
    },
    {
      "id": "elyd1f7",
      "source": "datasetConfigNode_w3tu6e",
      "sourceHandle": "caption_config",
      "target": "captionListNode_fj4tgk",
      "targetHandle": "in",
      "selected": false
    },
    {
      "id": "e7slplz",
      "source": "datasetConfigNode_w3tu6e",
      "sourceHandle": "batch_config",
      "target": "batchListNode_kpny16",
      "targetHandle": "in",
      "selected": false
    },
    {
      "id": "eucf2il",
      "source": "imageListNode_abhwuy",
      "sourceHandle": "img_0",
      "target": "imageConfigNode_1nv2wa",
      "targetHandle": "in",
      "selected": false
    },
    {
      "id": "ehfrbxo",
      "source": "targetListNode_0n02jz",
      "sourceHandle": "tgt_0",
      "target": "targetConfigNode_f208nn",
      "targetHandle": "in",
      "selected": false
    },
    {
      "id": "ee14hb7",
      "source": "referenceListNode_mi3ibt",
      "sourceHandle": "ref_0",
      "target": "referenceConfigNode_3dhhvf",
      "targetHandle": "in",
      "selected": false
    },
    {
      "id": "ekh6o2q",
      "source": "referenceConfigNode_3dhhvf",
      "sourceHandle": "entry_0",
      "target": "referenceEntryNode_7zsfq2",
      "targetHandle": "in",
      "selected": false
    },
    {
      "id": "evtjqoy",
      "source": "captionListNode_fj4tgk",
      "sourceHandle": "cap_0",
      "target": "captionConfigNode_y6g2r0",
      "targetHandle": "in",
      "selected": false
    },
    {
      "id": "efzrm0l",
      "source": "batchListNode_kpny16",
      "sourceHandle": "batch_0",
      "target": "batchConfigNode_8luchy",
      "targetHandle": "in",
      "selected": false
    },
    {
      "type": "default",
      "animated": false,
      "style": {
        "strokeWidth": 2,
        "stroke": "#a1a1aa"
      },
      "interactionWidth": 15,
      "source": "imageListNode_abhwuy",
      "sourceHandle": "img_bqemw",
      "target": "imageConfigNode_q9h7bm",
      "targetHandle": "in",
      "id": "ea6b4td",
      "selected": false
    },
    {
      "type": "default",
      "animated": false,
      "style": {
        "strokeWidth": 2,
        "stroke": "#a1a1aa"
      },
      "interactionWidth": 15,
      "source": "ds_list",
      "sourceHandle": "dataset_cbgxv",
      "target": "datasetConfigNode_w3tu6e",
      "targetHandle": "in",
      "id": "reactflow__edge-ds_listdataset_cbgxv-datasetConfigNode_w3tu6ein"
    }
  ],
  "timestamp": 1767523365.639064,
  "version": "1.0"
}